

##  é¡¹ç›®è¯´æ˜



#   ç¨³éƒ¨è½

**ç¨³éƒ¨è½** ç”± [å§šæ³½æº](http://www.yaozeyuan.online/) åˆ›ä½œï¼Œé‡‡ç”¨ [MIT](http://opensource.org/licenses/MIT) åè®®è¿›è¡Œè®¸å¯ã€‚

*   é¡¹ç›®åŸºäºå¾®åšç°æœ‰æ¥å£+TypeScriptæ„å»ºï¼Œä¸ºå¾®åšç½‘å‹æä¾›ä¸€ä¸ªæ–¹ä¾¿çš„, ä»¥ä¾›è‡ªå·±é˜…è¯»/æ•°æ®å¤‡ä»½/è‡ªèº«ç»“é›†æ•´ç†çš„æ–¹å¼

ä¸è€ƒè™‘å•†ä¸šç”¨é€”

æ¥å—åŠŸèƒ½å»ºè®®, ä½†ä¸€èˆ¬ä¸è€ƒè™‘å®šåˆ¶å¼€å‘

#   è½¯ä»¶ä¸‹è½½

æœ€æ–°ç‰ˆæœ¬: 1.1.0
[ç‚¹å‡»ä¸‹è½½](http://stablog.bookflaneur.cn/%E7%A8%B3%E9%83%A8%E8%90%BD%20Setup%201.1.0.exe)

ä½¿ç”¨æˆªå›¾:

è½¯ä»¶ç•Œé¢:
![è½¯ä»¶ç•Œé¢](http://stablog.bookflaneur.cn//img/%E4%BD%BF%E7%94%A8%E6%88%AA%E5%9B%BE.png)

è¾“å‡ºçš„htmlç”µå­ä¹¦:
![è¾“å‡ºçš„htmlç”µå­ä¹¦](http://stablog.bookflaneur.cn//img/%E8%BE%93%E5%87%BA%E7%9A%84html%E7%94%B5%E5%AD%90%E4%B9%A6.png)

è¾“å‡ºçš„pdfç”µå­ä¹¦:
![è¾“å‡ºçš„pdfç”µå­ä¹¦](http://stablog.bookflaneur.cn//img/%E8%BE%93%E5%87%BA%E7%9A%84pdf%E7%94%B5%E5%AD%90%E4%B9%A6.png)


##  é¡¹ç›®åŠ¨æœº

ä¸¥è‚ƒä¿æŠ¤ä»¥[@Aioroså…ˆç”Ÿ](https://weibo.com/u/6646798696?refer_flag=0000015010_&from=feed&loc=nickname&sudaref=www.weibo.com&is_all=1)ä¸ºä»£è¡¨çš„çç¨€é‡ç”Ÿè¯»ç‰©åšä¸»


#   ä½¿ç”¨æŒ‡å—

1.  ç™»å½•å¾®åš. ç”±äºå¾®åšç½‘é¡µæœ¬èº«é—®é¢˜, è¾“å…¥è´¦å·/å¯†ç /éªŒè¯ç æ—¶ç•¥æœ‰å¡é¡¿, è¯·è€å¿ƒç­‰å¾…
   
2.  è¿›å…¥ç³»ç»Ÿè®¾ç½®, å°†ä¸ªäººä¸»é¡µåœ°å€ç²˜è´´è¿›è¾“å…¥æ . ç‚¹å‡»`åŒæ­¥ä¸ªäººä¿¡æ¯`æŒ‰é’®, å¯çœ‹åˆ°é¢„ä¼°çš„å¤‡ä»½æ—¶é•¿, ç‚¹å‡»`å¼€å§‹å¤‡ä»½`, æ‰§è¡Œå¤‡ä»½æ“ä½œ.
3.  å¤‡ä»½å®Œæˆåä¼šè‡ªåŠ¨æ‰“å¼€ç”µå­ä¹¦è¾“å‡ºç›®å½•, `ç¨³éƒ¨è½è¾“å‡ºçš„ç”µå­ä¹¦`ç›®å½•ä¸‹, å³ä¸ºç”µå­ä¹¦, å…¶ä¸­, `html`ç›®å½•ä¸‹ä¸ºhtmlæ ¼å¼ä¹¦ç±, `index.html`ä¸ºç›®å½•é¡µ. `pdf`ä¸‹ä¸ºpdfè¾“å‡ºä½ç½®

 
1.  ![ç™»å½•å¾®åš](http://stablog.bookflaneur.cn//img/%E7%99%BB%E5%BD%95%E5%BE%AE%E5%8D%9A.jfif)
2.  ![é…ç½®ä»»åŠ¡](http://stablog.bookflaneur.cn//img/%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4-6.png)
3.  ![æŸ¥çœ‹ç”µå­ä¹¦](http://stablog.bookflaneur.cn//img/%E6%9F%A5%E7%9C%8B%E8%BE%93%E5%87%BA%E7%9A%84%E7%94%B5%E5%AD%90%E4%B9%A6.jfif)

#   é…ç½®é¡¹è¯´æ˜

1.  å¤‡ä»½é¡µæ•°: ä»ç¬¬mé¡µå¤‡ä»½åˆ°ç¬¬né¡µ
    1.  é™¤é¦–æ¬¡å¤‡ä»½å¤–, æ­£å¸¸ä½¿ç”¨åªè¦å¤‡ä»½å‰10é¡µå¾®åšå³å¯, å¯ä»¥åŠ å¿«å¤‡ä»½é€Ÿåº¦
2.  å¾®åšæ’åº
    1.  æŒ‰å¾®åšå‘å¸ƒæ—¶é—´è¿›è¡Œæ’åº. ç²¾ç¡®åº¦ä¸º`å¤©`. å»ºè®®ä½¿ç”¨`ç”±æ—§åˆ°æ–°`æ¨¡å¼, ç¬¦åˆé˜…è¯»ä¹ æƒ¯
3.  å›¾ç‰‡é…ç½®
    1.  ç”µå­ä¹¦å†…æ˜¯å¦åŒ…å«å›¾ç‰‡. å»ºè®®é€‰æ‹©`æœ‰å›¾`æ¨¡å¼
4.  è‡ªåŠ¨åˆ†å·
    1.  è§£å†³ç”µå­ä¹¦ä½“ç§¯è¿‡å¤§é—®é¢˜. å¦‚æœå•æœ¬ç”µå­ä¹¦å†…å¾®åšæ€»æ•°è¶…å‡ºé…ç½®å€¼, å°†ä¼šåˆ†ä¸ºå¤šå·è¾“å‡º
5.  æ—¶é—´èŒƒå›´
    1.  åªè¾“å‡ºæŒ‡å®šæ—¶é—´èŒƒå›´å†…çš„å¾®åšè®°å½•.
6.  åˆ†é¡µä¾æ®
    1.  htmlç‰ˆç”µå­ä¹¦å†…, æŒ‰ä»€ä¹ˆæ ‡å‡†åˆå¹¶å¾®åš. æ¨è`æŒ‰æœˆ`åˆå¹¶å¾®åš. è¯ç—¨åšä¸»å¯ä»¥`æŒ‰å¤©`, ä¸å–œæ¬¢è¯´è¯çš„åšä¸»å¯ä»¥`æŒ‰å¹´` 


#   Q & A

é—®: è½¯ä»¶å®‰å…¨å—, ä¸ºä»€ä¹ˆä¸€å®šè¦ç™»é™†åæ‰èƒ½ä½¿ç”¨?
ç­”: ä½œè€…å¯ä»¥ä¿è¯ä»é¡¹ç›®Githubä¸»é¡µä¸Šä¸‹è½½çš„è½¯ä»¶å®‰å…¨å¯é . é¡¹ç›®æºä»£ç å¼€æ”¾, å®åœ¨ä¸æ”¾å¿ƒå¯ä»¥åŸºäºæºä»£ç è‡ªè¡Œç¼–è¯‘. ç”±äºæ˜¯å¾®åšå¤‡ä»½é¡¹ç›®,åªæœ‰ç™»å½•è‡ªå·±çš„å¾®åšè´¦å·åæ‰èƒ½çœ‹åˆ°å‘å¸ƒçš„æ‰€æœ‰å¾®åš, æ‰€ä»¥å¿…é¡»è¦ç™»é™†.

é—®: ä¸ºä»€ä¹ˆå¤‡ä»½è¿™ä¹ˆæ…¢? ä¸ºä»€ä¹ˆæ¯æ¬¡éƒ½è¦ç­‰20sä¹‹åæ‰æŠ“å–ä¸‹ä¸€æ¡å¾®åš?
ç­”: æ–°æµªå¯¹çˆ¬è™«è¿›è¡Œäº†ä¸¥æ ¼é™åˆ¶, 20sæŠ“ä¸€æ¬¡æ˜¯æˆ‘è¯•éªŒå¤šæ¬¡ä¹‹å, å¯ä»¥å®‰å…¨å¤‡ä»½å¾®åšæ•°æ®çš„æœ€çŸ­é—´éš”. ä½œä¸ºä¸ºéå¼€å‘äººå‘˜æä¾›çš„å¤‡ä»½å·¥å…·, **ç¨³å®š**ç¬¬ä¸€ğŸµ

é—®: ä¸ºå•¥åªæœ‰Windowsç‰ˆ? æˆ‘æ˜¯Macç”¨æˆ·, ä»€ä¹ˆæ—¶å€™ä¼šæœ‰Macç‰ˆ? ä¼šä¸ä¼šæœ‰Androidç‰ˆ? iOSç‰ˆ?
ç­”: å› ä¸ºä½œè€…ç”¨çš„æ˜¯Windows, æ²¡æœ‰Mac...ä»¥åŠ, ç”±äºè¿™æœ¬èº«æ˜¯ä¸€ä¸ªä¸šä½™é¡¹ç›®, æ‰€ä»¥ä¸ä¼šå¼€å‘Android/iOS. æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥æ¯”ç…§æºä»£ç è‡ªè¡Œå¼€å‘.




#   ä»£ç è§„èŒƒ
1.  å˜é‡å‘½åè§„èŒƒ
    1.  ç±»å‹ç»Ÿä¸€ä½¿ç”¨namespaceæ–¹å¼å£°æ˜, å¯¼å…¥æ—¶ä½¿ç”¨`Type + xxx`å½¢å¼è¿›è¡Œå¯¼å…¥
    2.  Modelå¯¼å…¥æ—¶ç»Ÿä¸€ä½¿ç”¨`M + xxx`å½¢å¼è¿›è¡Œå¯¼å…¥
    3.  Viewå¯¼å…¥æ—¶ç»Ÿä¸€ä½¿ç”¨`View + xxx`å½¢å¼è¿›è¡Œå¯¼å…¥
    4.  Utilå·¥å…·å‡½æ•°å¯¼å…¥æ—¶ç»Ÿä¸€ä½¿ç”¨`xxx + Util`å½¢å¼è¿›è¡Œå¯¼å…¥
    5.  asyncå‡½æ•°å‰ç»Ÿä¸€æ·»åŠ `async`å‰ç¼€, ä»¥å’Œæ­£å¸¸å‡½æ•°è¿›è¡ŒåŒºåˆ†
2.  æ–‡ä»¶å‘½åè§„èŒƒ
    1.  ç»Ÿä¸€ä½¿ç”¨ä¸‹åˆ’çº¿æ–¹å¼å‘½å

#   å¼€å‘è¯´æ˜

0.  å¿…é¡»ä½¿ç”¨node12
    1.  Electronç‰ˆæœ¬å¿…é¡»å’Œç¯å¢ƒä¸­çš„nodeç‰ˆæœ¬ä¸€è‡´, æ‰èƒ½æ­£å¸¸ç¼–è¯‘sqlite
        1.  ç›®å‰ä½¿ç”¨çš„æ˜¯Electron@6.0.12, è‡ªå¸¦nodeä¸º12.4.0, å› æ­¤è¦æ±‚ç¯å¢ƒnodeä¹Ÿéœ€è¦ä¸º12.x.x
1.  å»ºè®®åªå¼€å‘å‘½ä»¤ç‰ˆ
    1.  ä½¿ç”¨`npm run ace`å¯åŠ¨
2.  GUIç‰ˆéœ€è¦ä¸ºElectronç¼–è¯‘sqlite3, éå¸¸éº»çƒ¦, ä¸å»ºè®®å°è¯•
    1.  æµç¨‹
        1.  Windowsç”¨æˆ·
            1.  å®‰è£…[VS 2019ç¤¾åŒºç‰ˆ](https://visualstudio.microsoft.com/zh-hans/downloads/), ç¤¾åŒºç‰ˆå…è´¹ä¸‹è½½. Windowsä¸‹ä¸ºElectronç¼–è¯‘sqlite3éœ€è¦VSæä¾›çš„æ„å»ºå·¥å…·
            2.  å¯åŠ¨VS, é€‰æ‹©`å·¥å…·`-`è·å–å·¥å…·å’ŒåŠŸèƒ½`
            3.  å‹¾é€‰`ä½¿ç”¨C++çš„æ¡Œé¢å¼€å‘`-`MSVC v140 - VS 2015 C++ç”Ÿæˆå·¥å…·(v14.00)`, å®‰è£…å³å¯
            4.  å¥½äº†ä¸€ä¸ªå°æ—¶è¿‡å»äº†
            5.  æ‰§è¡Œ `npm run rebuild-sqlite3`, ç¼–è¯‘å®Œæˆsqlite3ä¹‹å, å°±å¯ä»¥å¯åŠ¨GUIç•Œé¢äº†
            6.  ç‰¹åˆ«è¯´æ˜: è¿™å¥—æµç¨‹åªé€‚åˆçº¯å‡€ç¯å¢ƒ, å¦‚æœæ˜¯`Electron@4`å‡çº§åˆ°`Electron@6`, å†ç¼–è¯‘ä¼šç¼–è¯‘ä¸è¿‡å»(ä¼šæœ‰v4çš„ç¼–è¯‘æ®‹ç•™), å°†æ•´ä¸ª`node_modules`ç›®å½•åˆ é™¤åé‡æ–°`install`å³å¯
        2.  Macç”¨æˆ·
            1.  æ­£å¸¸`npm install`å³å¯, æ³¨æ„å®‰è£…`puppeteer`å’Œ`electron`æœ¬èº«éå¸¸è€—æ—¶, éœ€è¦ä½¿ç”¨æ·˜å®æºè¿›è¡Œä¸‹è½½`--registry=https://registry.npm.taobao.org/`
    2.  æ³¨æ„:
        1.  æ‰“åŒ…æ—¶ä¼šå‘distç›®å½•ä¸­å¤åˆ¶ä¸€ä»½node_modulesç›®å½•, å¯¼è‡´npm run æ—¶ä¼˜å…ˆä»distä¸­è·å–node_moduleä¿¡æ¯, å¯¼è‡´æ— æ³•å¯åŠ¨
            1.  å› æ­¤, æ‰“åŒ…ç»“æŸåéœ€è¦å°†disté‡Œçš„node_modulesç›®å½•åˆ æ‰, ä»¥å…å½±å“åç»­å¼€å‘å·¥ä½œ
3.  ç”µå­ä¹¦å°é¢åˆ†è¾¨ç‡ä¸º: 100 * 130(å®½*é«˜)
4.  commitä¿¡æ¯è§„èŒƒ => 
    | å…³é”®å­— | åŠŸèƒ½          |
    | ------ | ------------- |
    | feat   | æ·»åŠ æ–°åŠŸèƒ½    |
    | format | è°ƒæ•´ä»£ç æ ¼å¼  |
    | fix    | ä¿®å¤é”™è¯¯      |
    | doc    | ä¿®è®¢æ–‡æ¡£/æ³¨é‡Š |

#   å¼€å‘æŒ‡å—

##  åŸºæœ¬æ€è·¯

1.  TypeScriptæä¾›ç±»å‹æ”¯æŒ, åœ¨ç¼–å†™ä»£ç æ—¶å¯ä»¥è‡ªåŠ¨æç¤ºå˜é‡ä¸‹çš„å±æ€§ 
2.  Electronæä¾›å›¾å½¢ç•Œé¢, åˆ©ç”¨webviewæ ‡ç­¾ç›´æ¥ç™»é™†å¾®åš
3.  åˆ©ç”¨å¾®åšæ¥å£æŠ“å–æ•°æ®
4.  ace/commandæä¾›å‘½ä»¤è¡Œæ”¯æŒ
5.  sqlite3æä¾›æ•°æ®åº“æ”¯æŒ

##  å®ç°æ–¹å¼
1.  å°†ç”µå­ä¹¦åˆ¶ä½œåˆ†ä¸ºä»¥ä¸‹ä¸‰æ­¥
    1.  åˆå§‹åŒ–ç¯å¢ƒ => å¯¹åº”äº`npm run ace Init:Env`å‘½ä»¤
    2.  æŠ“å–æŒ‡å®šå†…å®¹ => å¯¹åº”äº`npm run ace Fetch:XXX`ç³»åˆ—å‘½ä»¤, ç›®å‰æ”¯æŒ`Column`/`Author`/`Activity`/`Collection`/`Topic`
    3.  ä»æ•°æ®åº“ä¸­è·å¾—æ•°æ®, ç”ŸæˆæŒ‡å®šå†…å®¹ç”µå­ä¹¦ => å¯¹åº”äº`npm run ace Generate:XXX`ç³»åˆ—å‘½ä»¤, ç›®å‰æ”¯æŒ`Column`/`Author`/`Activity`/`Collection`/`Topic`
    4.  å› æ­¤, å®é™…ä»»åŠ¡æµç¨‹å°±æ˜¯æ ¹æ®ç”¨æˆ·è¾“å…¥url, ç”Ÿæˆå¯¹åº”å‘½ä»¤é…ç½®, ä¸æ–­æ‰§è¡Œå‘½ä»¤å³å¯
2.  é¡¹ç›®å¼€å‘æµç¨‹
    1.  `npm run watch` å¯åŠ¨ç›‘æ§, å°†`ts`è‡ªåŠ¨ç¼–è¯‘ä¸º`js`æ–‡ä»¶
    2.  `npm run startgui`, å¯åŠ¨å‰ç«¯ç•Œé¢(vueé¡¹ç›®, åŸºäºElement-UIç®€å•æ„å»º)
    3.  æ‰§è¡Œ`npm run start`, ä»¥è°ƒè¯•æ¨¡å¼å¯åŠ¨Electron
        1.  å‰ç«¯ç‚¹å‡»`å¼€å§‹ä»»åŠ¡`æŒ‰é’®å, å°†ä»»åŠ¡é…ç½®å†™å…¥`task_config_list.json`, å†ç”±Electronæ”¶é›†ç™»é™†åäº§ç”Ÿçš„å¾®åšcookie, å­˜å…¥`config.json`æ–‡ä»¶ä¸­, éšåå¯åŠ¨`Dispatch:Command`å‘½ä»¤, å¼€å§‹æ‰§è¡Œä»»åŠ¡
3.  é¡¹ç›®å‘å¸ƒ
    1.  æ‰§è¡Œ`npm run dist`
4.  æ³¨æ„äº‹é¡¹
    1.  Electronéœ€è¦ç¼–è¯‘sqlite3åæ‰èƒ½å¯åŠ¨, ä¸å®¹æ˜“æ, å»ºè®®ç›´æ¥ä½¿ç”¨`npm run ace`å‘½ä»¤è¡Œæ–¹å¼è¿›è¡Œè°ƒè¯•
    2.  å‘½ä»¤ä½¿ç”¨è¯´æ˜è¯¦è§ä»£ç 


#   åŠŸèƒ½å»ºè®®

æ¬¢è¿é€šè¿‡[issue](https://github.com/YaoZeyuan/stablog/issues)æå»ºè®®

#   æ”¯æŒä½œè€…

![è€é“,è°¢è°¢äº†](http://stablog.bookflaneur.cn//img/%E8%80%81%E9%93%81%E8%B0%A2%E8%B0%A2%E4%BA%86.jfif)